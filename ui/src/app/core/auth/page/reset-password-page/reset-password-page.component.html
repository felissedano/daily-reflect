<app-auth-layout title="Reset your password">
    <div *ngIf="confirmState==='na'">
        <p>Enter your new password in the form below to reset your password for {{ userEmail }}</p>
        <form (ngSubmit)="resetPassword()" [formGroup]="resetPasswordForm">
            <mat-form-field>
                <mat-label>New Password</mat-label>
                <input matInput type="password" formControlName="password" name="password">
                <mat-error *ngIf="resetPasswordForm.controls.password.hasError('required')">This field is required
                </mat-error>
                <mat-error *ngIf="resetPasswordForm.controls.password.hasError('pattern')">Must contain at least 8
                    character, one capital letter, one lowercase letter and one number
                </mat-error>
            </mat-form-field>
            <br>
            <mat-form-field>
                <mat-label>Confirm New Password</mat-label>
                <input matInput type="password" formControlName="confirmPassword" name="confirmPassword">
                <mat-error *ngIf="resetPasswordForm.controls.confirmPassword.hasError('required')">This field is
                    required
                </mat-error>
                <mat-error *ngIf="resetPasswordForm.controls.confirmPassword.hasError('samePassword')">The two passwords
                    do not match
                </mat-error>
            </mat-form-field>
            <br>
            <mat-error>{{errorMessage}}</mat-error>
            <button mat-flat-button>Confirm</button>
        </form>
    </div>

    <div *ngIf="confirmState==='success'">
        <h3>Reset password successful</h3>
        <p>You password has been updated. You may now login with the new credential</p>
        <a [routerLink]="['/auth/login']">Back to login</a>
        <br>
        <button type="button" [routerLink]="['/auth/login']" mat-flat-button>Back to login</button>

    </div>
</app-auth-layout>
